= module OpenSSL::SSL::SocketForwarder 
to_io で返されるソケットオブジェクトにメソッドを
フォワードするモジュールです。

[[c:OpenSSL::SSL::SSLSocket]] や [[c:OpenSSL::SSL::SSLServer]] と
いったソケットの SSL ラッパクラスにソケット関連のメソッドを定義するため
に使われます。

== Instance Methods
--- addr -> Array
ラップされているソケットの接続情報を返します。

[[m:IPSocket#addr]] と同様です。

--- peeraddr -> Array
ラップされているソケットの接続先相手の情報を返します。

[[m:IPSocket#peeraddr]] と同様です。

--- setsockopt(level, optname, optval) -> 0
ラップされているソケットのオプションを設定します。

[[m:BasicSocket#setsockopt]] と同様です。

@param level    [[man:setsockopt(2)]] の level に相当する整数を指定します
@param optname  [[man:setsockopt(2)]] の option_name に相当する整数を指定します
@param optval  設定される値を文字列で指定します。

@raise Errno::EXXX  オプションの設定に失敗した場合発生します。

--- getsockopt(level, optname) -> String
ラップされているソケットのオプションを設定します。

[[m:BasicSocket#getsockopt]] と同様です。

@param level    [[man:getsockopt(2)]] の 第二引数のlevel に相当する整数を指定します
@param optname  [[man:getsockopt(2)]] の 第三引数のoption_name に相当する整数を指定します


--- fcntl(cmd, arg=0) -> Integer
ラップされているソケットに対してシステムコール fcntl を実行します。

[[m:IO#fcntl]] と同様です。

@param cmd IO に対するコマンドを、添付ライブラリ [[lib:fcntl]] が提供している定数で指定します。
@param arg cmd に対する引数を整数、文字列、booleanのいずれかで指定します。
@raise Errno::EXXX fcntl の実行に失敗した場合に発生します。
@raise IOError 既に close されている場合に発生します。

--- closed? -> bool
ラップされているソケットが
close していたら true を返します。

--- do_not_reverse_lookup=(bool)
真を渡すとアドレスからホスト名への逆引きを行わなくなります。

[[m:BasicSocket#do_not_reverse_lookup]] と同様です。

@param bool 真で逆引きを抑制します

= module OpenSSL::Buffering

== Instance Methods
--- <<
#@todo

[[m:IO#<<]] と同様です。

--- close
#@todo

接続を閉じます。flush を呼んでから閉じます。

--- each
#@todo

[[m:IO#each]] と同様です。

--- each_byte
#@todo

[[m:IO#each_byte]] と同様です。

--- eof?
--- eof
#@todo

[[m:IO#eof?]] と同様です。

--- flush
#@todo

[[m:IO#flush]] と同様です。

--- getc
#@todo

[[m:IO#getc]] と同様です。

--- gets([rs])
#@todo

[[m:IO#gets]] と同様です。

--- print([arg[, ...]])
#@todo

[[m:IO#print]] と同様です。

--- printf(format[, arg[, ...]])
#@todo

[[m:IO#printf]] と同様です。

--- puts([obj[, ...]])
#@todo

[[m:IO#puts]] と同様です。

--- read([length[, buf]])
#@todo

[[m:IO#read]] と同様です。

--- readchar
#@todo

[[m:IO#readchar]] と同様です。

--- readlines([rs])
#@todo

[[m:IO#readlines]] と同様です。

--- ungetc(char)
#@todo

[[m:IO#ungetc]] と同様です。

--- write(str)
#@todo

[[m:IO#write]] と同様です。

--- readline
#@todo
--- each_line
#@todo
--- read_nonblock
#@todo
--- write_nonblock
#@todo
--- readpartial
#@todo
--- sync
#@todo
--- sync=
#@todo

== Constants

--- BLOCK_SIZE
#@todo

= class OpenSSL::SSL::SSLSocket < Object
include Enumerable
include OpenSSL::SSL::SocketForwarder 

ソケットをラップして SSL での認証と暗号通信を実現するためのクラスです。

SSLSocket クラス

=== 例

SSL/TLS サーバに接続して write します。

  require 'socket'
  require 'openssl'
  include OpenSSL
  
  soc = TCPSocket.new('www.example.com', 443)
  ssl = SSL::SSLSocket.new(soc)
  ssl.connect
  ssl.write('hoge')
  print ssl.peer_cert.to_text
  ssl.close
  soc.close

== Class Methods

--- new(socket)
--- new(socket, context)
#@todo

SSLSocket オブジェクトを生成します。socket には [[c:TCPSocket]] オブジェクトを与えます。context には [[c:OpenSSL::SSL::SSLContext]] オブジェクトを与えます。

== Instance Methods

--- io
--- to_io
#@todo

SSLSocket オブジェクトを生成する時に渡されたソケットを返します。

--- context
#@todo

SSLSocket オブジェクトを生成する時に渡されたコンテクストを返します。
[[c:OpenSSL::SSL::SSLContext]] オブジェクトです。

--- sync_close
--- sync_close=(bool)
#@todo

SSLSocket を close するときに TCPSocket も close するかどうかを設定します。

--- cert
#@todo

--- peer_cert
#@todo

接続相手の X509 証明書 [[c:OpenSSL::X509::Certificate]] オブジェクトを返します。
検証結果は別途知る必要があります。

#@since 1.8.1
--- peer_cert_chain
#@todo

接続相手の証明書チェーンすなわち [[c:OpenSSL::X509::Certificate]] オブジェクトの配列を返します。接続相手の証明書からルート CA の証明書までのリストで、順序は以下の通りです。

  [接続相手の証明書, 下位CAの証明書,... 中間CAの証明書]
#@end

--- state
#@todo

現在の状態を 6 文字の文字列で返します。

--- cipher
#@todo

現在実際に使われている暗号の情報を配列で返します。 TLS/SSL ハンドシェイクが行われる前の接続されていない状態では nil を返します。
返される配列の形式は以下の例のように [暗号名, TLS/SSLのバージョン, 鍵長, アルゴリズムで使われる bit 数] となります。

  ["DES-CBC3-SHA", "TLSv1/SSLv3", 168, 168]

#@since 1.8.2
--- pending
#@todo

読み取り可能なバイト数を返します。
#@end

--- accept
#@todo

TLS/SSL クライアントから接続を受け付け、 TLS/SSL ハンドシェイクを実行し、自分自身を返します。


--- connect
#@todo

接続相手との TLS/SSL ハンドシェイクを実行します。


#@since 1.8.3
--- post_connection_check
#@todo
#@end

--- sysclose
#@todo

接続を閉じます。相手に'close notify'を送ります。

--- sysread(length[, buf])
#@todo

[[m:IO#sysread]] と同様です。

--- syswrite(string)
#@todo

[[m:IO#syswrite]] と同様です。

--- accept_nonblock
#@todo

--- connect_nonblock
#@todo

--- hostname
#@todo

--- hostname=
#@todo

--- session
#@todo

--- session=
#@todo

--- session_reused?
#@todo

--- verify_result
#@todo

